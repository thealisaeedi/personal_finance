{% extends 'base.html' %}
{% block title %} Transaction List {% endblock title %}
{% block content %}
    <div class="container mx-auto p-6 max-w-5xl">

        <h1 class="text-3xl font-bold text-white mb-8 text-center">Your Transactions</h1>

        <!-- Transaction List Card -->
        <div class="bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700">

            {% if transactions %}
                <div class="space-y-3">
                    {% for transaction in transactions %}
                        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 bg-gray-700 rounded-lg hover:bg-gray-600 transition-all duration-200 border border-gray-600">
                            
                            <!-- Left: Date & Type -->
                            <div class="flex items-center space-x-3 mb-2 sm:mb-0">
                                <span class="text-sm font-medium text-gray-300">{{ transaction.date }}</span>
                                <span class="px-3 py-1 text-xs font-semibold rounded-full 
                                    {% if transaction.type == 'IN' %}bg-green-900 text-green-300 border border-green-700
                                    {% else %}bg-red-900 text-red-300 border border-red-700{% endif %}">
                                    {{ transaction.get_type_display }}
                                </span>
                            </div>

                            <!-- Center: Amount -->
                            <div class="text-lg font-bold 
                                {% if transaction.type == 'IN' %}text-green-400
                                {% else %}text-red-400{% endif %}">
                                {% if transaction.type == 'IN' %}+{% else %}-{% endif %}{{ transaction.amount }}
                            </div>

                            <!-- Right: Description & Category -->
                            <div class="text-sm text-gray-400 text-right sm:text-left mt-1 sm:mt-0">
                                <span class="block sm:inline">{{ transaction.description|default:"â€”" }}</span>
                                {% if transaction.category %}
                                    <span class="inline-block ml-2 px-2 py-1 bg-gray-600 text-gray-300 text-xs rounded">
                                        {{ transaction.category }}
                                    </span>
                                {% else %}
                                    <span class="inline-block ml-2 text-xs text-gray-500">No Category</span>
                                {% endif %}
                            </div>
                                   
                            <!-- Edit & Delete Buttons -->
                            <div class="flex items-center gap-4 mt-3">
                                <a href="{% url 'edit_transaction' transaction.pk %}"
                                class="flex items-center gap-1.5 px-3 py-1.5 bg-yellow-500/20 border border-yellow-400 text-yellow-300 rounded-lg 
                                        hover:bg-yellow-500/30 hover:text-yellow-200 transition-all duration-200 text-sm font-medium shadow-sm">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                            d="M11 5h2m2 0h3m0 0v3m0-3l-9 9m0 0v3h3m-3-3l9-9" />
                                    </svg>
                                    Edit
                                </a>

                                <a href="{% url 'delete_transaction' transaction.pk %}" role="button"
                                class="flex items-center gap-1.5 px-3 py-1.5 bg-red-500/20 border border-red-400 text-red-300 rounded-lg 
                                        hover:bg-red-500/30 hover:text-red-200 transition-all duration-200 text-sm font-medium shadow-sm"
                                onclick="return confirm('Are you sure you want to delete this transaction?');">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                                            d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                    Delete
                                </a>
                            </div>


                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="text-center py-12">
                    <p class="text-gray-400 text-lg">No transactions yet.</p>
                    <p class="text-gray-500 mt-2">Start by adding your first transaction!</p>
                </div>
            {% endif %}

        </div>



        <!-- Add Button -->
        <div class="mt-8 text-center">
            <a href="{% url 'add_transaction' %}"
               class="inline-block px-8 py-3 bg-green-600 text-white font-medium rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition">
                Add New Transaction
            </a>
        </div>

        <!-- Back to Report Link -->
        <div class="mt-4 text-center">
            <a href="{% url 'report' %}"
               class="inline-block px-6 py-2 bg-indigo-600 text-white text-sm rounded-md hover:bg-indigo-700 transition">
                View Financial Report
            </a>
        </div>

    </div>
{% endblock %}